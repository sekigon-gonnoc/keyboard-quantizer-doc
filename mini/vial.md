
# Vialファームウェア

[Vial](https://vial.rocks/)および最新版[Remap](https://remap-keys.app/)でのキーマップ書き換えに対応したファームウェアです。

ビルド済みのファームウェアは[Release](https://github.com/sekigon-gonnoc/keyboard-quantizer-doc/releases) ページにアップロードしています。

## キーマップの書き換え

VialまたはRemapに接続してキーマップを書き換えられます。
Vialに接続した場合、電源を入れなおすまでRemapには接続できません。Vialのデスクトップアプリ版は初回接続に失敗してしまうため、エラーが出たらRefreshボタンを押して再接続してください。

デフォルトでは日本語配列向けレイアウトが選択されているため、英語キーボードを使う場合はレイアウトを変更してください。

JP設定のPCにUSキーボードを繋いだりUS設定のPCにJPキーボードを繋ぎたい場合は、RemapのFunctions->VIA USER KEYまたはVialのUserタブに配置されているカスタムキーコードを使用して設定を切り替えてください。

Vialを使用するとコンボ・オーバーライド・タップダンスを設定したり、Tapping termなどの各種設定が変更できます。

### タップ・ホールドの挙動

タップしたつもりがホールドになる場合はvialの`Quantum setings -> Tap-Hold`の項目のTapping termの値を確認し、数値を大きくしてください。デフォルトは200です。

### マクロの書き換え

Delayを含むマクロを設定する場合はRemapではなくVialを使用してください

### マウスの設定を書き換える場合

マウスのボタンの割り当てを変更したい場合はVialまたはRemapでレイアウトからMouseを選択してください。レイアウトに表示されているキーはそれぞれ下記に対応します。

- 一番上の列: ボタン1~8
- 右下の4つ: 簡易ジェスチャ(左上、左下、右下、右上)

簡易ジェスチャ機能はLTやMOでレイヤ移動した状態でカーソルを動かしてから元のレイヤに戻った時に実行されます。

Remap上ではHoldにレイヤ移動を、Tapにマウスボタンを指定できます。ボタン4, 5の用に通常は長押ししないボタンと組み合わせることでボタン数が少ないマウスでもレイヤ機能を活用できます。


## ファームウェアのビルド

ファームウェア自体に変更を加えたい場合はファームウェアをビルドしてください。

[リポジトリ](https://github.com/sekigon-gonnoc/vial-qmk/tree/bmp-vial-1.0.6) (bmp-vial-1.0.6をgcc10でビルドしています)

```
make sekigon/keyboard_quantizer/mini:vial:uf2 
```
